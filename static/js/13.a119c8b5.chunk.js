(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[13],{112:function(e,t,r){e.exports={editproductcontainer:"AdminEditProduct_editproductcontainer__-7HGn",productmodal:"AdminEditProduct_productmodal__1_gN0",product:"AdminEditProduct_product__1Xq2H",productbtn:"AdminEditProduct_productbtn__2owQS",sizeinput:"AdminEditProduct_sizeinput__MsJWt",smallcontainer:"AdminEditProduct_smallcontainer__2CSn-",sizecontainer:"AdminEditProduct_sizecontainer__2oFZw",submitbtn:"AdminEditProduct_submitbtn__1qqvg",uploadbtn:"AdminEditProduct_uploadbtn__2HCNA",editformcontainer:"AdminEditProduct_editformcontainer___iEOK",gobackbtn:"AdminEditProduct_gobackbtn__1XhHE",dropdown:"AdminEditProduct_dropdown__-Rqya",imagecontainer:"AdminEditProduct_imagecontainer__1Zpxi",imagebtn:"AdminEditProduct_imagebtn__1uc10",imagehover:"AdminEditProduct_imagehover__2766O",error:"AdminEditProduct_error__1bF4x"}},147:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(35),s=r(32),o=r(17),c=r(18),i=r(20),u=r(19),l=r(0),d=r(7),p=r(12),b=r(10),m=r(112),h=r.n(m),j=r(11),g=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).componentDidMount=function(){(0,a.props.getProductFromServer)(a.props.location.pathname.split("/")[3]),console.log(a.props)},a.componentDidUpdate=function(e,t){var r=a.props.product,n=r.name,s=r.price,o=r.brand,c=r.colour,i=r.category,u=r.size,l=r.subcategory,d=r.description,p=0!==e.product.length&&e.product.size[0];a.props.images===e.images&&a.props.product!==e.product&&a.setState({name:n,price:s,brand:o,colour:c,chosenSubCat:l,size:u,small:p.small,medium:p.medium,large:p.large,category:i,subcategory:[l],description:d})},a.handleSubmit=function(e){e.preventDefault(),a.setState({errors:[]});var t=a.props.user;a.setState({errors:[]});var r=!0;if(""===a.state.name&&(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for name"])}})),r=!1),""!==a.state.small&&Number.isInteger(parseInt(a.state.small))||(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for small"])}})),r=!1),""!==a.state.medium&&Number.isInteger(parseInt(a.state.medium))||(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for medium"])}})),r=!1),""!==a.state.large&&Number.isInteger(parseInt(a.state.large))||(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for large"])}})),r=!1),""===a.state.colour&&(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for colour"])}})),r=!1),0!==a.state.price&&Number.isInteger(parseInt(a.state.price))||(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for price"])}})),r=!1),0===a.props.product.images.length&&(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide at least one image"])}})),r=!1),""===a.state.brand&&(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for brand"])}})),r=!1),""===a.state.category&&(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for category"])}})),r=!1),""===a.state.description&&(a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for description"])}})),r=!1),""===a.state.chosenSubCat&&a.setState((function(e){return{errors:[].concat(Object(s.a)(e.errors),["Please provide a value for subcategory"])}})),r){var n={data:{name:a.state.name,price:a.state.price,brand:a.state.brand,colour:a.state.colour,stock:{small:a.state.small,medium:a.state.medium,large:a.state.large},category:a.state.subcategory,chosenSubCat:a.state.chosenSubCat,description:a.state.description},admin:{email:t.email,token:t.token},productId:a.props.product._id};a.props.updateProduct(n)}},a.reset=function(){a.props.closeModal()},a.viewProduct=function(){a.props.history.push("/product/".concat(a.props.createdProductId)),a.props.closeModal()},a.removeImage=function(e){var t=a.props.user,r=t.email,n=t.token;a.props.deleteImage({index:e,id:a.props.product._id,admin:{email:r,token:n}})},a.updateCat=function(e){if("blank"!==e.target.value){var t=Object.keys(a.props.categories[e.target.value]),r=[];t.forEach((function(t){return[a.props.categories[e.target.value][t].forEach((function(e){return r.push(e)}))]})),console.log(r),a.setState({category:e.target.value,subcategory:r})}},a.updateSubCat=function(e){a.setState({chosenSubCat:e.target.value})},a.handleChange=function(e){if(console.log(e.target.value,e.target.name),e.target.files){var t=a.props.user,r=t.email,s=t.token,o=new FormData;o.append("image",e.target.files[0]),a.props.uploadImage({formData:o,id:a.props.product._id,admin:{email:r,token:s}})}else a.setState(Object(n.a)({},e.target.name,e.target.value))},a.state={name:"",price:0,imagesToDisplay:[],imagesArrayForMulter:[],brand:"",small:0,medium:0,large:0,size:null,category:"",subcategory:[],chosenSubCat:"",description:"",errors:[],colour:"",showModal:!1},a.initialState=a.state,a}return Object(c.a)(r,[{key:"render",value:function(){var e=this,t=this.props.categories,r=this.props,n=r.productCreated,s=r.product,o=(this.state.size&&this.state.size[0].small,Object.keys(t).map((function(e){return Object(a.jsx)("option",{name:"category",value:e,children:e})})));return o.unshift(Object(a.jsxs)("option",{selected:!0,value:"blank",children:["-- select an option --"," "]})),console.log(0!==s.length&&s.images),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:h.a.editproductcontainer,children:[n&&Object(a.jsx)("div",{className:h.a.productmodal,children:Object(a.jsxs)("div",{className:h.a.product,children:[Object(a.jsxs)("h2",{style:{textAlign:"center"},children:[" ",Object(a.jsx)("i",{className:"fas fa-check"}),"\xa0Product created! Would you like to"," "]}),Object(a.jsx)("button",{class:h.a.productbtn,onClick:function(){return e.viewProduct()},className:h.a.continueshoppingbtn,children:"View the product in our store"}),Object(a.jsx)("button",{class:h.a.productbtn,onClick:function(){return e.reset()},className:h.a.continueshoppingbtn,children:"Create another product"})]})}),Object(a.jsx)("h4",{children:Object(a.jsxs)("button",{class:h.a.gobackbtn,children:[Object(a.jsx)(d.b,{style:{color:"#ecf0f1"},to:"/admin",children:"Go back"})," "]})}),Object(a.jsx)("h2",{children:"EDIT PRODUCT-please just fill in the fields you would like to change"}),Object(a.jsxs)("div",{className:h.a.editformcontainer,children:[Object(a.jsxs)("form",{onSubmit:this.handleSubmit,encType:"multipart/form-data",children:[Object(a.jsxs)("label",{children:["Name:",Object(a.jsx)("input",{placeholder:s&&s.name,name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(a.jsxs)("label",{children:["Price",Object(a.jsx)("input",{type:"text",name:"price",value:this.state.price,onChange:function(t){return e.handleChange(t)}})]}),"Please upload the images below",Object(a.jsxs)("label",{for:"uploadbtn",class:h.a.uploadbtn,children:[" ","Upload Images"]}),Object(a.jsx)("input",{style:{display:"none"},onChange:function(t){return e.handleChange(t)},id:"uploadbtn",type:"file",accept:".jpg, .png,.jpeg",multiple:""}),Object(a.jsx)("div",{class:h.a.imagecontainer,children:0!==s.length&&s.images.map((function(t,r){return Object(a.jsxs)("div",{onClick:function(){return e.removeImage(r)},className:h.a.imagebtn,children:[Object(a.jsx)("div",{class:h.a.imagehover,children:"X"}),Object(a.jsx)("img",{style:{height:"4rem",width:"6rem",padding:"0 0.5rem"},src:"http://localhost:5000/".concat(t),alt:""})]})}))}),Object(a.jsxs)("label",{children:["Brand",Object(a.jsx)("input",{type:"text",placeholder:this.props.product&&this.props.product.brand,name:"brand",value:this.state.brand,onChange:function(t){return e.handleChange(t)}})]}),Object(a.jsxs)("label",{children:["Colour",Object(a.jsx)("input",{type:"text",name:"colour",value:this.state.colour,onChange:function(t){return e.handleChange(t)}})]}),Object(a.jsxs)("label",{children:["Stock :",""!==this.state.small&&""!==this.state.medium&&""!==this.state.large?parseInt(this.state.small)+parseInt(this.state.medium)+parseInt(this.state.large):null,Object(a.jsx)("br",{}),"Please enter amounts in each size below",Object(a.jsx)("div",{class:h.a.sizecontainer,children:Object(a.jsxs)("div",{class:h.a.smallcontainer,children:[Object(a.jsx)("span",{children:" Small "}),Object(a.jsx)("input",{class:h.a.sizeinput,type:"text",name:"small",value:this.state.small,onChange:function(t){return e.handleChange(t)}}),Object(a.jsx)("span",{children:" Medium"}),Object(a.jsx)("input",{class:h.a.sizeinput,type:"text",name:"medium",value:this.state.medium,onChange:function(t){return e.handleChange(t)}}),Object(a.jsx)("span",{children:" Large "}),Object(a.jsx)("input",{class:h.a.sizeinput,type:"text",name:"large",value:this.state.large,onChange:function(t){return e.handleChange(t)}})]})})]}),Object(a.jsxs)("label",{children:["Category",Object(a.jsx)("br",{}),Object(a.jsx)("select",{class:h.a.dropdown,value:this.state.category,onChange:function(t){return e.updateCat(t)},children:o})]}),Object(a.jsxs)("label",{children:["Subcategory",Object(a.jsx)("br",{}),Object(a.jsxs)("select",{class:h.a.dropdown,disabled:1===this.state.subcategory.length,value:this.state.chosenSubCat,onChange:function(t){return e.updateSubCat(t)},children:[Object(a.jsx)("option",{value:"blank",children:"-- select an option -- "}),this.state.subcategory.length&&this.state.subcategory.map((function(e){return Object(a.jsx)("option",{name:"subcategory",value:e,children:e})}))]})]}),Object(a.jsxs)("label",{children:["Description",Object(a.jsx)("textarea",{placeholder:this.props.product&&this.props.product.description,class:h.a.description,type:"textarea",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}})]}),Object(a.jsx)("input",{class:h.a.submitbtn,type:"submit",value:"Submit"})]}),this.state.errors&&this.state.errors.map((function(e){return Object(a.jsx)("p",{className:h.a.error,children:e})}))]})]})})}}]),r}(l.Component);t.default=Object(b.g)(Object(p.b)((function(e){return{categories:e.products.categories,user:e.user.user,product:e.products.selectedProduct,productCreated:e.products.productCreatedModal,createdProductId:e.products.latestCreatedProductId}}),(function(e){return{createNewProduct:function(t){return e(Object(j.h)(t))},closeModal:function(){return e(Object(j.g)())},getProductFromServer:function(t){return e(Object(j.m)(t))},updateProduct:function(t){return e(Object(j.C)(t))},deleteImage:function(t){return e(Object(j.i)(t))},uploadImage:function(t){e(Object(j.E)(t))}}}))(g))}}]);
//# sourceMappingURL=13.a119c8b5.chunk.js.map